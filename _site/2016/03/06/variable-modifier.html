<!DOCTYPE html>
<html lang="en">
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta charset="utf-8"/>
		<title> Bash Shell - 변수 변경자 (variable modifier) - Fantasie</title>
		<!-- For responsive site
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
		-->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<link rel="author" href="/humans.txt">
		<meta name="description" content="Description Goes Here">
		<link rel="stylesheet" href="/css/style.css">
		<!--[if IE 7]>
			<html class="ie7"> 
			<link rel="stylesheet" type="text/css" href="/css/font-awesome-ie7.min.css">
		<![endif]-->
		<!--[if IE 8]><html class="ie8"> <![endif]-->		
	    <!--[if lt IE 9]>
	      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	    <![endif]-->

		<link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
		<link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
		<link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
		<link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
		<link rel="shortcut icon" href="ico/favicon.png">	    
	</head>
	<body>
	<!-- Header
	    ================================================== -->
	<header>
	</header>

	<main class="content">
    <section class="container">
    	<div class="row-fluid">
    		<article class="home-icon">
				<a href="/">
					<i class="icon-home"></i> 
				</a>
			</article>
			<article class="post">
				<h2 class="content">Bash Shell - 변수 변경자 (variable modifier)</h2>
				<div class="time">06 March 2016</div>
				<section>
					<p><code>변수 변경자</code>를 사용하면, 특정 변수에 값이 지정되어 있는지 검사할 수 있으며 검사 결과에 따라 새로운 값을 할당할 수 있다.</p>

<!-- more -->

<h3 id="toc_0">값 존재 여부 검사</h3>

<table><thead>
<tr>
<th>command</th>
<th>result</th>
</tr>
</thead><tbody>
<tr>
<td>${var:-word}</td>
<td>변수 var에 값이 존재한다면 해당 값 사용. 변수가 존재하지 않거나 null 이라면 word 사용.</td>
</tr>
<tr>
<td>${var:=word}</td>
<td>변수 var에 값이 존재한다면 해당 값 사용. 변수가 존재하지 않거나 null 이라면 var의 값으로 word를 할당한 뒤 이를 사용.</td>
</tr>
<tr>
<td>${var:+word}</td>
<td>변수 var에 값이 존재한다면, word 사용.</td>
</tr>
<tr>
<td>${var:?word}</td>
<td>변수 var에 값이 존재한다면 해당 값 사용. 변수가 존재하지 않거나 null 이라면 <code>표준 오류</code>로 word 출력 후 쉘 종료.</td>
</tr>
</tbody></table>

<p>특히 <code>:=</code> 변경자는 변수에 값이 지정되어 있지 않을 경우 디폴트값을 설정할 때 유용하다.</p>
<div class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="gp">$ </span><span class="nb">echo</span> <span class="nv">$var</span>             <span class="c"># 설정된 적 없는 변수</span>

<span class="gp">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">var</span><span class="k">:-</span><span class="nv">hello</span><span class="k">}</span>    <span class="c"># 값이 존재하지 않으므로 대신 hello가 출력됨</span>
hello
<span class="gp">$ </span><span class="nb">echo </span>var              <span class="c"># 변수 var는 여전히 존재하지 않음</span>

<span class="gp">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">var</span>:<span class="p">=hello</span><span class="k">}</span>    <span class="c"># 값이 존재하지 않으므로 대신 hello가 출력됨</span>
hello
<span class="gp">$ </span><span class="nb">echo</span> <span class="nv">$var</span>             <span class="c"># 위에서 := 변경자를 사용했으므로, var의 값이 hello로 변경됨</span>
hello
</code></pre></div>
<hr>

<p>만약 <code>:-</code>, <code>:=</code>, <code>:+</code>, <code>:?</code> 에서 콜론 <code>:</code>을 사용하지 않는다면, 변수의 값이 null인 경우에도 값이 존재하는 것으로 간주한다.</p>
<div class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="gp">$ </span><span class="nv">var</span><span class="o">=</span>                  <span class="c"># 변수 var의 값을 null로 지정</span>
<span class="gp">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">var</span><span class="k">:-</span><span class="nv">hello</span><span class="k">}</span>    <span class="c"># 값이 null이므로 대신 hello가 출력됨</span>
hello
<span class="gp">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">var</span><span class="p">-hello</span><span class="k">}</span>     <span class="c"># 콜론을 빼면 null일지라도 hello 출력되지 않음.</span>
</code></pre></div>
<p><code>:?</code> 변경자를 이용하면, 변수의 값이 없을 때 간편하게 에러를 던질 수 있다. 변수명과 지정한 문자열이 표준 오류로 출력된다.</p>
<div class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="gp">$ </span><span class="nb">echo</span> <span class="nv">$myname</span>  <span class="c"># 설정된 적 없는 변수</span>

<span class="gp">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">myname</span>:?<span class="s2">"myname is undefined..."</span><span class="k">}</span>
-bash: myname: myname is undefined...
</code></pre></div>
<h3 id="toc_1">offset을 이용한 sub string</h3>

<p>변수의 값의 sub string을 간단하게 생성할 수 있다.</p>

<table><thead>
<tr>
<th>command</th>
<th>result</th>
</tr>
</thead><tbody>
<tr>
<td>${var:offset}</td>
<td>변수 var의 값을 offset 위치부터 추출. offset은 0부터 시작한다.</td>
</tr>
<tr>
<td>${var:offset:length}</td>
<td>변수 var의 값을 offset 위치부터 length 길이만큼 추출.</td>
</tr>
</tbody></table>
<div class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="gp">$ </span><span class="nv">var</span><span class="o">=</span><span class="s2">"hello"</span>
<span class="gp">$ </span><span class="nb">echo</span> <span class="nv">$var</span>
hello
<span class="gp">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">var</span>:0<span class="k">}</span>     <span class="c"># 0번 위치부터 끝까지 출력. $var 와 동일. </span>
hello
<span class="gp">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">var</span>:1:3<span class="k">}</span>   <span class="c"># 1번 위치부터 3개 출력</span>
ell
<span class="gp">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">var</span>:2<span class="k">}</span>     <span class="c"># 2번 위치부터 끝까지 출력</span>
llo
<span class="gp">$ </span><span class="nb">echo</span> <span class="nv">$var</span>         <span class="c"># 변수 var의 값에는 영향이 없다.</span>
hello
</code></pre></div>
<h3 id="toc_2">패턴 검색을 이용한 sub string</h3>

<p>패턴 검색을 통해 문자열 앞뒤의 일부분을 제거할 수 있다.</p>

<table><thead>
<tr>
<th>command</th>
<th>result</th>
</tr>
</thead><tbody>
<tr>
<td>${var%pattern}</td>
<td>변수 var의 값의 뒤쪽부터, 패턴과 일치하는 가장 작은 부분을 제거하여 추출.</td>
</tr>
<tr>
<td>${var%%pattern}</td>
<td>변수 var의 값의 뒤쪽부터, 패턴과 일치하는 가장 큰 부분을 제거하여 추출.</td>
</tr>
<tr>
<td>${var#pattern}</td>
<td>변수 var의 값의 앞쪽부터, 패턴과 일치하는 가장 작은 부분을 제거하여 추출.</td>
</tr>
<tr>
<td>${var##pattern}</td>
<td>변수 var의 값의 앞쪽부터, 패턴과 일치하는 가장 큰 부분을 제거하여 추출.</td>
</tr>
<tr>
<td>${var#pattern}</td>
<td>변수 var의 값의 앞쪽부터, 패턴과 일치하는 가장 큰 부분을 제거하여 추출.</td>
</tr>
<tr>
<td>${#var}</td>
<td>변수 var의 값의 문자 갯수(length)를 추출.</td>
</tr>
</tbody></table>
<div class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="gp">$ </span><span class="nv">pathname</span><span class="o">=</span><span class="s2">"/usr/bin/local/bin"</span>
<span class="gp">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">pathname</span><span class="p">%/bin*</span><span class="k">}</span>    <span class="c"># 패턴 /bin* 지정</span>
/usr/bin/local              <span class="c"># 뒤쪽의 `/bin`이 제거되었다.</span>
<span class="gp">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">pathname</span><span class="p">%%/bin*</span><span class="k">}</span>
/usr                        <span class="c"># 뒤쪽의 `/bin/local/bin`이 제거되었다.</span>
</code></pre></div><div class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="gp">$ </span><span class="nv">pathname</span><span class="o">=</span><span class="s2">"/home/www/file/a.txt"</span>
<span class="gp">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">pathname</span><span class="p">##*/</span><span class="k">}</span>      <span class="c"># 패턴 */ 지정</span>
a.txt                       <span class="c"># 앞쪽의 `/home/www/file/`이 제거되어 파일명만 출력됨</span>
</code></pre></div>
				</section>
				<div class=bottom_line></div>
				<section>
					 
							<a rel="prev" class="a-hover"href="/2016/03/05/first-class_function.html"><i class="icon-arrow-left"></i> 일급 객체 (first-class object)</a>
						
						 
							<a rel="next" style="float:right" class="a-hover"href="/2016/03/15/code_readability.html">Code Readability <i class="icon-arrow-right"></i></a>
					
				</section>
			</article>
		</div><br>
	</section>
</main>


	<copyright>
		<div><a href=#>fantasie.github.io</a></div>
	</copyright>

	<!-- Javascripts 
	    ================================================= -->
	<script src="/js/jquery.min.js"></script>
	<script src="/js/custom.js"></script>

    <!-- Analytics
    ================================================== -->
    <script>
		// analytics code
    </script>	
	</body>
</html>
