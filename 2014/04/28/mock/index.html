<!DOCTYPE html>
<html lang="en">
	<head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
		<meta charset="utf-8"/>
		<title>
		 Mock -
		
		 soy blog</title>
		<!-- For responsive site
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
		-->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<link rel="author" href="/humans.txt">
		<meta name="description" content="Description Goes Here">
		<link rel="stylesheet" href="/css/style.css">
		<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

		<!--[if IE 7]>
			<html class="ie7"> 
			<link rel="stylesheet" type="text/css" href="/css/font-awesome-ie7.min.css">
		<![endif]-->
		<!--[if IE 8]><html class="ie8"> <![endif]-->		
	    <!--[if lt IE 9]>
	      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	    <![endif]-->

		<script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

		  ga('create', 'UA-92395927-1', 'auto');
		  ga('send', 'pageview');
		</script>

		<link rel="apple-touch-icon" sizes="57x57" href="/ico/apple-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="/ico/apple-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="/ico/apple-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="/ico/apple-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="/ico/apple-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="/ico/apple-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="/ico/apple-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="/ico/apple-icon-152x152.png">
		<link rel="apple-touch-icon" sizes="180x180" href="/ico/apple-icon-180x180.png">
		<link rel="icon" type="image/png" sizes="192x192"  href="/ico/android-icon-192x192.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/ico/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="96x96" href="/ico/favicon-96x96.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/ico/favicon-16x16.png">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#ffffff">
		<meta name="msapplication-TileImage" content="/ico/ms-icon-144x144.png">
		<meta name="theme-color" content="#ffffff"> 
	</head>
	<body>
	<!-- Header
	    ================================================== -->
	<header>
	</header>

	







<main class="content">
    <section class="container">
    	<div class="row-fluid">
			<article class="top-menu">
				<a href="/" class="menu-icon" data-toggle="tooltip" title="HOME"><i class="fa fa-home"></i></a>
<a href="/about/" class="menu-icon" data-toggle="tooltip" title="ABOUT"><i class="fa fa-user"></i></a>
<a href="/category/diary/" class="menu-icon" data-toggle="tooltip" title="DIARY"><i class="fa fa-edit"></i></a>
      <a href="/category/blog/" class="menu-icon" data-toggle="tooltip" title="BLOG"><i class="fa fa-bars"></i></a>
      <a href="/tag/" class="menu-icon" data-toggle="tooltip" title="TAG"><i class="fa fa-tags"></i></a>
  <div class="top-line"></div>
 
			</article>

			

     	   <article class="diary">
       	 	   <div align=center><h2>Mock</h2></div>
       		   <div class="time"><a style="color:#777" href="http://3.34.122.196:7500/edit/2014-04-28-mock.md"><i class="fa fa-calendar"></i></a> 28 April 2014</div>
				 <div class="tags"><a href="/tag/test/">#Test</a>, <a href="/tag/TBC/">#TBC</a></div>
        		  <section class="diary_section">
     			  	 
           		  	  <div class="inner_content"><h3 id="mock-객체">Mock 객체</h3>
<ul>
  <li>모듈의 겉모양이 실제 모듈과 비슷하게 보이도록 만든 가짜 객체.</li>
  <li>실제 객체를 만들기엔 비용과 시간이 많이 들거나, 의존성이 길게 걸쳐져 있어 구현이 어려울 경우 이런 가짜 객체를 만들어 사용한다.</li>
</ul>

<!-- more -->

<ul>
  <li>테스트 작성을 위한 환경 구축이 어려울 때 사용</li>
  <li>환경 구축을 위한 작업 시간이 많이 필요할 때. DB, 서버, FTP 등을 설치해야만 테스트가 가능해질 때.</li>
  <li>특정 모듈을 아직 가지고 있지 않아서 테스트 환경을 구축하지 못할 때.</li>
  <li>타 부서와의 협의나 정책이 필요할 때.</li>
  <li>테스트가 특정 경우나 순간에 의존적일 때 사용</li>
  <li>특정한 경우나 순간이 항상 재현될 수 있도록 Mock을 사용한다.</li>
  <li>테스트 시간이 오래 걸릴 때 사용</li>
  <li>개인 PC, 서버의 성능 문제로 인해 오래 걸릴 수도 있지만, 특정 모듈을 호출했을 때 멀리 갔다 오느라 시간이 오래 걸리는 경우. 기능 수행 그 자체보다 테스트 수행 시 영향을 미치는 다른 부분으로 인해 오래 걸리는 경우 Mock을 사용한다.</li>
</ul>

<h3 id="test-double">Test Double</h3>
<ul>
  <li>대역, 스턴트맨을 나타내는 Stunt Double 이라는 단어에서 차용해온 단어로, 오리지널 객체를 사용해서 테스트를 진행하기가 어려울 경우 이를 대신하여 테스트를 진행할 수 있도록 만들어주는 객체를 지칭.</li>
  <li>다섯개의 하위 분류로 나뉜다.</li>
</ul>

<h4 id="dummy-object">Dummy Object</h4>
<ul>
  <li>말 그대로 멍청한 모조품, 단순한 껍데기. 오로지 인스턴스화 될 수 있는 수준으로만 구현된 객체.</li>
  <li>단지 인스턴스화된 객체가 필요할 뿐 해당 객체의 기능까지는 필요하지 않은 경우 사용. 따라서 해당 더미 객체의 메소드가 호출됬을 때의 정상 동작은 보장되지 않는다.</li>
</ul>

<h4 id="test-stub">Test Stub</h4>
<ul>
  <li>Dummy Object가 마치 실제로 동작하는 것처럼 보이게 만들어놓은 객체. 객체의 특정 상태를 가정해서 만들어놓은 단순 구현체.</li>
  <li>미리 지정(하드코딩)된 특정한 값을 리턴해주거나 특정 메시지를 출력하는 등의 작업을 한다.</li>
</ul>

<h4 id="fake-object">Fake Object</h4>
<ul>
  <li>복잡한 로직이나 객체 내부에서 필요로 하는 다른 외부 객체들의 동작을 비교적 단순화하여 구현한 객체. 테스트 케이스 작성을 진행하기 위해 필요한 다른 객체들과의 의존성을 제거하기 위해 사용된다.</li>
  <li>Stub이 한 개의 인스턴스를 대표하는데 주로 쓰인다면, Fake Object는 여러 개의 인스턴스를 대표하거나, 좀 더 복잡한 구현이 들어가 있는 객체를 지칭한다.</li>
</ul>

<blockquote>
  <p>Dummy Object: 단지 인스턴스화 될 수 있는 객체 수준</p>
</blockquote>

<blockquote>
  <p>Test Stub: 인스턴스화 된 객체가 ‘특정 상태나 모습’을 대표함.</p>
</blockquote>

<blockquote>
  <p>Fake Object: 여러 개의 인스턴스를 대표하거나, 좀 더 복잡한 구현이 들어가 있음.</p>
</blockquote>

<h4 id="test-spy">Test Spy</h4>
<ul>
  <li>특정 메소드의 정상 호출 여부를 확인해야 할 때 사용한다.</li>
  <li>Dummy, Stub, Fake를 포함한 Test Double로 구현된 객체 전 범위에 걸쳐 Spy 기능을 추가할 수 있다.</li>
  <li>예를 들어 Student 클래스의 getName() 메소드가 몇 번이나 호출되었는지 테스트를 하고 싶을 때,  MockStudent 클래스에 count라는 멤버 변수를 추가한다. 그리고 getName() 메소드에서 count를 증가시키도록 한다. 마지막으로 MockStudent 인스턴스의 사용이 끝났을 때, count 값을 확인하는 방식으로 테스트한다. (물론 Mock 프레임워크를 사용하면 이런 작업이 필요 없다.)</li>
</ul>

<h4 id="mock-object">Mock Object</h4>
<ul>
  <li>Mock 객체는 상태(state)가 아닌 행위(behavior)를 검증하기 위해 사용되는 객체를 지칭한다. 대부분 Mock 프레임워크를 사용한다.</li>
  <li>일반적인 Test Double은 상태(state)를 기반으로 테스트 케이스를 작성한다. 반면 Mock 객체는 행위(behavior)를 기반으로 테스트 케이스를 작성한다.</li>
</ul>

<blockquote>
  <p>참고) 여기서 말한 <code class="highlighter-rouge">Mock Object</code>라는 용어는 Double의 다섯가지 분류 중 한 가지로 소개된 것이다. 그러나 일반적으로 사용되는 <code class="highlighter-rouge">Mock Object</code>는 <code class="highlighter-rouge">Test Double</code>과 동일한 의미, 즉 행위 기반 테스트에 한정된 것이 아닌 더 넓은 개념으로 사용되니 혼동하지 않아야 한다.</p>
</blockquote>

<blockquote>
  <p>다섯가지 분류를 설명할 때가 아닌 이상 <code class="highlighter-rouge">Mock Object</code>는 <code class="highlighter-rouge">Test Double</code>과 같이 넓은 의미로 이해하면 된다.</p>
</blockquote>

<h3 id="mock-framework">Mock Framework</h3>
<p>동적으로 Mock 객체를 만들어주는 프레임워크를 지칭. Mock 객체를 직접 명시적인 클래스로 만들지 않아도 되며, 상태 뿐 아니라 행위까지도 테스트 케이스에 포함시킬 수 있다.
대표적으로 EasyMock, jMock, Mockito 등이 있다.</p>

<h3 id="mockito">Mockito</h3>
<p>EashMock, jMock의 단점을 보완하는 Mock 프레임워크.</p>

<ol>
  <li>CreateMock: 인터페이스에 해당하는 Mock 객체를 만든다.</li>
  <li>Stub: 테스트에 필요한 Mock 객체의 동작을 지정한다.</li>
  <li>Exercise: 테스트 메소드 내에서 Mock 객체를 사용한다.</li>
  <li>Verify: 메소드가 예상대로 호출되었는지 검증한다.</li>
</ol>

<p>// TO DO.. 아직 정리를 못함</p>

<h4 id="given-when-then">given, when, then</h4>
<p>Mockito 개발자가 자신의 블로그에 테스트 케이스 작성을 위한 궁극의 템플릿이라며 호들갑스럽게(ㅋㅋ) 밝힌 템플릿. BDD 스타일을 따르며, 의미적으로 각 단계를 구분함으로써 가독성이 높아진다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testSomething</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">{</span>
	<span class="c1">//given : 선행 조건 기술</span>

	<span class="c1">//when : 기능 수행</span>

	<span class="c1">//then : 결과 확인</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<p>References</p>
<ul>
  <li>테스트 주도 개발: 고품질 쾌속개발을 위한 TDD 실천법과 도구 - 채수원</li>
  <li><a href="https://monkeyisland.pl/2009/12/07/given-when-then-forever/">https://monkeyisland.pl/2009/12/07/given-when-then-forever/</a></li>
</ul>

</div>
        		  	  
<div style="float: left"></div>
<div class="comments">
	<div class="comments_wrapper" aria-hidden="true">
		<div class="heading">
			<a href="#content_div" onClick="comment_toggle('comment_hidden_2014-04-28-mock');">Comments</a>
		</div>
		<div id="comment_hidden_2014-04-28-mock" style="display: none;">
			<div class="line"></div>
			<div class="content_div">
				<script src="https://utteranc.es/client.js" repo="soyme/my-blog-comments" branch="master" issue-term="2014-04-28-mock" theme="github-light" crossorigin="anonymous" async></script>
			</div>
		</div>
	</div>
</div>
<div style="clear: both"></div>

        		  </section>
				  <section class="prev_next">
					
                        <a style="float: left;" href="/2014/04/27/tdd/"><i class="icon-arrow-left"></i> TDD (Test Driven Development)</a>
                    
					
						<a style="float:right; margin-bottom: 10px;"; href="/2014/07/07/adapter_pattern/">Adapter 패턴 (Wrapper 패턴) <i class="icon-arrow-right"></i></a>
					
		  		  </section>
			</article>
		</div>
	</section>
</main>


	<footer>
  <div class="wrapper">
    <a href="#" class="menu-icon" data-toggle="tooltip" title="ABOUT"><i class="fa fa-arrow-up"></i></a>
  </div>
</footer>

	<copyright>
	</copyright>

	<!-- Javascripts 
	    ================================================= -->
	<script src="/js/jquery.min.js"></script>
	<script src="/js/custom.js"></script>
	<script type="text/template" id="template-comment">
	<div id="comment{index}" class="comment">
	<div class="comment_wrapper">
		<div class="comment_line"></div>
		<div>
		<span class="comment_name">
			
				<a rel="nofollow" href="{url}">{name}</a>
			
		</span>

		
			<span class="comment_date">, now</span> </div>
			<div class="comment_content">
			<p><em>This is a preview of your comment. It may take a couple of minutes for it to be displayed to others.</em></p>
		
		{message}</div>
	</div>
</div>
</script>

    <!-- Analytics
    ================================================== -->
    <script>
		// analytics code
    </script>	
	</body>
</html>
